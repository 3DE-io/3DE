!function(a,b){"use strict";if("undefined"!=typeof module&&module.exports&&"function"==typeof require)b(require("Ractive"));else if("function"==typeof define&&define.amd)define(["Ractive"],b);else{if(!a.Ractive)throw new Error("Could not find Ractive! It must be loaded before the Ractive.load plugin");b(a.Ractive)}}("undefined"!=typeof window?window:this,function(a){"use strict";function b(b,c){var e=new a.Promise(function(b,c){var e,f;e=j(document.querySelectorAll('link[rel="ractive"]')),f=e.length,e.forEach(function(e){var h=g(e);d(e.getAttribute("href")).then(function(c){a.components[h]=c,--f||b()},c)})});return b&&e.then(b,c),e}function c(b,c,e){var f=new a.Promise(function(a,c){var e,f,g=0,h={};f=function(e){var f=b[e];d(f).then(function(b){h[e]=b,--g||a(h)},c)};for(e in b)b.hasOwnProperty(e)&&(g+=1,f(e))});return c&&f.then(c,e),f}function d(b,c,d){var f,g;return g=k(b,a.baseUrl,!0),f=i(g).then(function(a){return e(a,g)},h),c&&f.then(c,d),f}function e(b,c){var d,g,h,j,m,n,o,p,q,r,s,t,u;for(b=a.parse(b,{noStringify:!0,interpolateScripts:!1,interpolateStyles:!1}),d=[],g=[],j=[],m=b.length;m--;)n=b[m],n&&7===n.t&&("link"===n.e&&n.a&&"ractive"===n.a.rel[0]&&d.push(b.splice(m,1)[0]),"script"!==n.e||n.a&&n.a.type&&"text/javascript"!==n.a.type[0]||g.push(b.splice(m,1)[0]),"style"!==n.e||n.a&&n.a.type&&"text/css"!==n.a.type[0]||j.push(b.splice(m,1)[0]));return s=d.length,t={},u=new a.Promise(function(a,b){d.forEach(function(d){var g,h,j;return g=d.a.href&&d.a.href[0],h=d.a.name&&d.a.name[0]||f(g),"string"!=typeof h?void b("Error parsing link tag"):(j=k(g,c),void i(j).then(function(a){return e(a,j)}).then(function(b){t[h]=b,--s||a(t)},b))}),s||a(t)}),h=g.map(l).join(";"),u.then(function(c){var d,e;return d=document.getElementsByTagName("head")[0],e={template:b,components:c},j.length&&(e.css=j.map(l).join(" ")),r=a.extend(e),h&&(o=document.createElement("script"),o.innerHTML="(function () {"+h+"}());",p=window.component,window.component={},d.appendChild(o),q=window.component.exports,"function"==typeof q?r=q(r):"object"==typeof q&&(r=r.extend(q)),d.removeChild(o),window.component=p),r})}function f(a){var b,c,d;return b=a.split("/"),c=b.pop(),d=c.lastIndexOf("."),-1!==d&&(c=c.substr(0,d)),c}function g(a){return a.getAttribute("name")||f(a.getAttribute("href"))}function h(a){throw a}function i(b){return new a.Promise(function(a,c){var d,e,f;d=new XMLHttpRequest,d.open("GET",b),e=function(){4!==d.readyState||f||(a(d.responseText),f=!0)},d.onload=d.onreadystatechange=e,d.onerror=c,d.send(),4===d.readyState&&e()})}function j(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function k(a,b,c){var d,e,f;if(c)b&&"/"!==b.charAt(b.length-1)&&(b+="/");else if("."!==a.charAt(0))return a;for(d=(b||"").split("/"),e=a.split("/"),d.pop();f=e.shift();)".."===f?d.pop():"."!==f&&d.push(f);return d.join("/")}function l(a){return a.f}return a.load=function(a,e,f){return a&&"function"!=typeof a?"object"==typeof a?c(a,e,f):d(a,e,f):(e=a,b(e,f))},a.load});